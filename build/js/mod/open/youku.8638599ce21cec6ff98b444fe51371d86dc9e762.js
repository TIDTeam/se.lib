/*! Copyright (c) SESHENGHUO.COM - Author: LIJUN - Email: zwlijun@gmail.com - Git: https://github.com/zwlijun/se.lib */
define(function(require,exports,module){require("http://player.youku.com/jsapi#YKU");var a=(require("mod/se/util.5418ba8bf71f527f29091bc874d170aac4af716b"),require("mod/se/listener.263f38898829bcbd37b39b7743be119a9db33581")),b={},c=function(b){this.player=null,this.parent=b.parent||"body",this.id=b.id,this.width=b.width||"100%",this.height=b.height||"100%",this.styleId=b.styleId||"0",this.clientId=b.clientId,this.vid=null,this.autoplay=b.autoplay||!1,this.showRelated=b.showRelated||!1,this.listener=new a({onready:null,onstart:null,onend:null})};c.prototype={exec:function(a,b){return this.listener.exec(a,b)},set:function(a,b){this.listener.set(a,b)},remove:function(a){this.listener.remove(a)},get:function(a){return this.listener.get(a)},clear:function(){this.listener.clear()},drawPlayerPanel:function(){var a=$("#"+this.id),b=/(%|auto)px/;a.length<1&&$(this.parent).append(a=$('<div id="'+this.id+'"></div>')),a.css({width:(this.width+"px").replace(b,"$1"),height:(this.height+"px").replace(b,"$1")})},parseVID:function(a){var b=a.indexOf("id_"),c=a.indexOf(".html");return a.substring(b+3,c)},create:function(a){var b=this;b.drawPlayerPanel(),b.vid=b.parseVID(a),b.player=new YKU.Player(b.id,{styleid:b.styleId,client_id:b.clientId,vid:b.vid,autoplay:b.autoplay,show_related:b.showRelated,events:{onPlayerReady:function(){b.exec("ready",[b.player])},onPlayStart:function(){b.exec("start",[b.player])},onPlayEnd:function(){b.exec("end",[b.player])}}})},play:function(){var a=this.player;a&&a.playVideo()},pause:function(){var a=this.player;a&&a.pauseVideo()},setSeek:function(a){var b=this.player;b&&b.seekTo(a)},getCurrentTime:function(){var a=this.player;return a&&a.currentTime()||-1}},module.exports={newInstance:function(a){var d=b[a.id]||(b[a.id]=new c(a));return{set:function(a,b){return d.set(a,b),this},create:function(a){return d.create(a),this},play:function(){return d.play(),this},pause:function(){return d.pause(),this},setSeek:function(a){return d.setSeek(a),this},getCurrentTime:function(){return d.getCurrentTime()}}}}});
