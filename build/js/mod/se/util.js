/*! Copyright (c) SESHENGHUO.COM - Author: LIJUN - Email: zwlijun@gmail.com */
define(function(require,exports,module){$.Action={};var a=function(a){a.preventDefault(),a.stopPropagation()},b=function(b){a(b);var c=$(b.currentTarget),d=c.attr("data-action")||"",e=/^([a-zA-Z0-9_]+):\/\/([a-zA-Z0-9_]+)(#([^#]+))?$/,f=e.exec(d),g=null,h=null,i=null,j=null,k=null;if(f&&(h=f[1],i=f[2],k=f[4]||null,g=$[h]||null)){if(-1==i.indexOf("/"))j=i;else{var l=i.split("/"),m=l.length;g=function(a,b,c){for(var d=null,e=0;c-1>e;e++){if(d=b[e],!(null!=a&&d in a))return null;a=a[d]||null}return a}(g,l,m),j=l[size-1]}null!=g&&j in g&&g[j].apply(null,[k])}},c={CLICK_EVENT:"ontouchstart"in window?"tap":"click",RequestStatus:{timeout:{status:65025,text:"亲，网络不给力啊~~"},error:{status:65026,text:"亲，系统出了点小问题，请稍候片刻再试"},abort:{status:65027,text:"抱歉，您的请求被中断，请重新发起"},parsererror:{status:65028,text:"数据处理异常"},success:{status:0,text:"OK"}},checkBitFlag:function(a,b){return!!(a&b)&&b>0},formatData:function(a,b,c){var d="",e=null;c=void 0===c?"\\$":c?"\\"+c:"",a=a||"",b=b||{};for(var f in b)b.hasOwnProperty(f)&&(e=new RegExp(c+"\\!?\\{"+f+"\\}","gm"),d=a=a.replace(e,b[f]),e=null);return d=d||a,e=new RegExp(c+"\\!\\{[^\\{\\}]+\\}","gm"),d=d.replace(e,""),e=null,d},hideAddressBar:function(){setTimeout(function(){window.scrollTo(0,1)},0)},getOrientation:function(){var a=window.orientation;return 0===a||180==a?0:90==a||-90==a?1:0},execHandler:function(a){if(a&&a instanceof Object){var b=a.callback||null,c=a.args||[],d=a.context||null,e=a.delay||-1;b&&b instanceof Function&&("number"==typeof e&&e>=0?setTimeout(function(){b.apply(d,c)},e):b.apply(d,c))}},execAfterMergerHandler:function(a,b){if(a&&a instanceof Object){{var c=(a.callback||null,a.args||[]);a.context||null}a.args=b.concat(c)}this.execHandler(a)},decodeHTML:function(a){var b=a.replace(/&#60;/g,"<");return b=b.replace(/&#62;/g,">"),b=b.replace(/&#34;/g,'"'),b=b.replace(/&#39;/g,"'"),b=b.replace(/&#38;/g,"&")},encodeHTML:function(a){var b=a.replace(/&/g,"&#38;");return b=b.replace(/>/g,"&#62;"),b=b.replace(/"/g,"&#34;"),b=b.replace(/'/g,"&#39;"),b=b.replace(/</g,"&#60;")},getCursorPosition:function(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else"number"==typeof a.selectionStart&&(b=a.selectionStart);return b},setCursorPosition:function(a,b){setTimeout(function(){if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=b;else if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},15)},setActionHook:function(){var d=$("body"),e=d.attr("data-actionhook");"1"!=e&&(d.on(c.CLICK_EVENT,"[data-action]",b),d.attr("data-actionhook","1"),"click"!=c.CLICK_EVENT&&d.on("click","[data-action]",a)),d=null},injectAction:function(a){$.extend($.Action,a)},getDevicePixelRatio:function(){return window.devicePixelRatio||1},getViewportPixel:function(){var a=window.innerWidth,b=window.innerHeight,c=this.getDevicePixelRatio();return{width:a*c,height:b*c}},getPercentageSize:function(a,b){var c=a.width/b.width*100,d=a.height/b.height*100,e={width:c+"%",height:d+"%"};return e}};module.exports=c});